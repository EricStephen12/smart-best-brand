generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

enum Role {
  ADMIN
  CUSTOMER
}

model User {
  id        String   @id @default(uuid())
  name      String?
  email     String   @unique
  password  String
  role      Role     @default(CUSTOMER)
  createdAt DateTime @default(now())
}

model Brand {
  id        String    @id @default(uuid())
  name      String
  slug      String    @unique
  logoUrl   String?
  isActive  Boolean   @default(true)
  products  Product[]
}

model Category {
  id       String            @id @default(uuid())
  name     String            @unique
  products ProductCategory[]
}

model Size {
  id       String    @id @default(uuid())
  label    String    @unique // e.g., King, Double
  products Product[]
}

model Product {
  id          String   @id @default(uuid())
  name        String
  slug        String   @unique
  brandId      String
  brand        Brand    @relation(fields: [brandId], references: [id])
  sizeId       String
  size         Size     @relation(fields: [sizeId], references: [id])
  type        String?  // Mattress, Pillow, etc.
  materials   String?
  firmness    String?
  finishing   String?
  price       Float
  promoPrice  Float?
  isNegotiable Boolean  @default(false)
  warranty    String?
  imageUrl    String?
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  
  categories  ProductCategory[]
}

model ProductCategory {
  productId  String
  categoryId String
  product    Product  @relation(fields: [productId], references: [id])
  category   Category @relation(fields: [categoryId], references: [id])

  @@id([productId, categoryId])
}

model DeliveryLocation {
  id        String  @id @default(uuid())
  name      String  @unique // Abuja, Benin
  basePrice Float
  isActive  Boolean @default(true)
}

model Promotion {
  id            String  @id @default(uuid())
  title         String
  discountType  String  // Percentage, Fixed
  discountValue Float
  isActive      Boolean @default(true)
}
